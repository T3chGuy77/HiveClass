define(["bluebird"],function(e){var t=function(){this.list=function(){return new e(function(e){chrome.tabs.query({},function(t){e(t.map(function(e){return{id:e.id,title:e.title,url:e.url,favicon:e.favicon}}))})})},this.close=function(t){return new e(function(e){chrome.tabs.remove(t,function(){e()})})},this.closeAllExceptUrl=function(t){return new e(function(e){chrome.tabs.query({url:t},function(t){e(t.map(function(e){return e.id}))})}).then(function(t){return new e(function(e){chrome.tabs.query({},function(n){e({allowed:t,all:n.map(function(e){return e.id})})})})}).then(function(e){for(var t=0;e.all.length>t;t++){var n=e.all[t];-1===e.allowed.indexOf(n)&&chrome.tabs.remove(n)}})}};return t});
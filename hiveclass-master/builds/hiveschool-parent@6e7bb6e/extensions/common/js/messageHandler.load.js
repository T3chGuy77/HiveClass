montageDefine("6e7bb6e","extensions/common/js/messageHandler",{dependencies:[],factory:function(require,exports,module){requirejs.load=function(context,moduleName,url){var xhr=new XMLHttpRequest;xhr.open("GET",chrome.extension.getURL(url)+"?r="+Date.now(),!0),xhr.onreadystatechange=function(){4===xhr.readyState&&200===xhr.status&&(eval(xhr.responseText),context.completeLoad(moduleName))},xhr.send(null)},requirejs({baseUrl:"js"},["configuration"],function(e){function n(){r=chrome.runtime.connect(),r.onMessage.addListener(s),r.onDisconnect.addListener(a)}function t(){n(),window.addEventListener("message",i)}function o(){document.removeEventListener(c,o),window.removeEventListener("message",i),r=null}if(0===location.href.indexOf(e.application.url)){var r,s=function(n){var t={target:"application",payload:n};window.postMessage(t,e.application.url)},a=function(){r.onMessage.removeListener(s),r.onDisconnect.removeListener(a),r.disconnect()},i=function(e){var n=e.data;n&&"extension"===n.target&&r.postMessage(n.payload)},c="destructmyextension_"+chrome.runtime.id;document.dispatchEvent(new CustomEvent(c)),setTimeout(function(){document.addEventListener(c,o)},10),t()}})}});